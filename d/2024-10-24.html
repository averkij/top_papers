
<!DOCTYPE html>
<html>
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-C1CRWDNJ1J"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-C1CRWDNJ1J');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>HF (4 статьи)</title>
    <link rel="icon" href="favicon.svg" sizes="any" type="image/svg+xml">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0989eacf;
            --secondary-color: #fff;
            --background-color: #f5f5f5;
            --text-color: #333333;
            --header-color: #0989eacf;
            --body-color: #f5f5f5;
            --menu-color: #002370;
        }
        body {
            font-family: 'Roboto Slab', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .a-clean {
            color: var(--secondary-color);
            text-decoration: none;
        }
        header {
            padding: 3em 0;
            text-align: center;
        }
        h1 {
            font-size: 2.4em;
            margin: 0;
            font-weight: 700;
        }
        h2 {
            # color: var(--primary-color);
            font-size: 1.2em;
            margin-top: 0;
            margin-bottom: 0.5em;
        }
        header p {
            font-size: 1.2em;
            margin-top: 0.5em;
            font-weight: 300;
        }
        main {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2em;
            padding: 10px 0 20px 0;
        }
        body.dark-tmeme>header {
            background-color: background-color: #333333;
            color: white;
        }
        body.dark-theme>div>main>article>div.article-content>p.meta {
            color: #fff;
        }
        body.light-theme>div>main>article>div.article-content>p.meta {
            color: #555;
        }
        body.dark-theme>div>main>article>div.article-content>p.pub-date {
            color: #ccc;
        }
        body.light-theme>div>main>article>div.article-content>p.pub-date {
            color: #555;
        }
        body.dark-theme>div>main>article>div.article-content>p.tags {
            color: #ccc;
        }
        body.light-theme>div>main>article>div.article-content>p.tags {
            color: #555;
        }
        body.light-theme>header {
            background-color: var(--header-color);
            color: white;
        }
        article {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
            transition: background-color 0.2s ease;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .article-content {
            padding: 1.5em;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
            cursor: pointer;
        }
        body.dark-theme>div>main>article {
            background-color: #444;
        }
        body.light-theme>div>main>article {
            background-color: #fff;
        }
        body.dark-theme>div>main>article:hover {
            background-color: #414141;
        }
        body.light-theme>div>main>article:hover {
            background-color: #fafafa;
        }
        .meta {
            font-size: 0.9em;
            margin-bottom: 0em;
        }
        .pub-date {
            font-size: 0.9em;
            margin-bottom: 0.8em;
            font-weight: 300;
        }
        .tags {
            font-size: 0.9em;
            margin-bottom: 1em;
            position: absolute;
            bottom: 10px;
            font-weight: 300;
            font-family: 'Roboto Slab';
        }
        .background-digit {
            position: absolute;
            bottom: -20px;
            right: -10px;
            font-size: 12em;
            font-weight: bold;
            color: rgba(0, 0, 0, 0.03);
            z-index: 0;
            line-height: 1;
        }
        .abstract {
            position: relative;
            max-height: 170px;
            overflow: hidden;
            transition: max-height 0.3s ease;
            cursor: pointer;
        }
        .abstract.expanded {
            max-height: 1000px;
        }
        .abstract-toggle {
            position: absolute;
            bottom: 4px;
            right: 0;
            cursor: pointer;
            color: var(--primary-color);
            float: right;
            font-weight: 400;
        }
        .explanation {
            background-color: #e8f5e9;
            border-left: 4px solid var(--secondary-color);
            padding: 1em;
            margin-top: 1.5em;
        }
        .links {
            margin-top: 1.5em;
            margin-bottom: 80px;
        }
        a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        a:hover {
            color: var(--secondary-color);
        }
        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 1em 0;
            margin-top: 2em;
        }
        .light-theme {
            background-color: var(--body-color);
            color: #333333;
        }
        .dark-theme {
            background-color: #333333;
            color: #ffffff;
        }
        .theme-switch {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 30px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        .switch-label {
            margin-right: 10px;
        }
        .update-info-container {
            margin-top: 15px;
            margin-bottom: 0px;
            text-align: left;
        }
        .sort-container {
            margin-top: 15px;
            margin-bottom: 0px;
            text-align: right;
        }
        .sub-header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        .update-info-container {
            flex: 1;
        }
        .sort-container {
            flex: 2;
        }
        .sort-dropdown {
            padding: 5px 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: white;
            color: var(--text-color);
            font-family: 'Roboto Slab', sans-serif;
        }
        .sort-label {
            margin-right: 10px;
            font-size: 1.0em !important;
        }        
        .dark-theme .sort-dropdown {
            background-color: #444;
            color: white;
            border-color: var(--text-color);
        }
        .title-sign {
            display: inline-block;
            transition: all 0.5s ease;            
        }
        .rotate {
            transform: rotate(45deg) translateY(-6px);
            transform-origin: center;
        }
        .title-text {
            display: inline;
            padding-left: 10px;
        }
        .category-filters {
            margin-top: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        .category-button {
            display: inline-block;
            margin: 5px;
            padding: 5px 10px;
            border-radius: 15px;
            background-color: #f0f0f0;
            color: #333;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .category-button.active {
            background-color: var(--primary-color);
            color: white;
        }
        .dark-theme .category-button {
            background-color: #555;
            color: #fff;
        }
        .dark-theme .category-button.active {
            background-color: var(--primary-color);
        }
        .category-toggle {
            display: none;
            margin-bottom: 10px;
            margin-top: 15px;
            cursor: pointer;
        }
        .clear-categories {
            display: inline-block;
            margin: 5px;
            padding: 5px 10px;
            border-radius: 15px;
            background-color: #f0f0f0;
            color: #333;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .clear-categories:hover {
            background-color: #bbb;
        }
        .svg-container {
            display: inline-block;
            position: relative;
            overflow: hidden;
        }
        .svg-container span {
            position: relative;
            z-index: 1;
        }
        .svg-container svg {
            position: absolute;
            bottom: 0;
            left: 0;
            z-index: 0;
        }

        .nav-menu {
            background-color: var(--menu-color);
            padding: 2px 0 2px 0;
            display: inline-block;
            position: relative;
            overflow: hidden;
            width: 100%;
        }        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: left;
            gap: 3em;
        }
        .nav-container span a {
            color: white;
        }        
        .nav-item {
            color: white;
            padding: 3px 0px;
            cursor: pointer;
            font-weight: 400;
        }        
        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .dark-theme .nav-menu {
            background-color: #333;
        }
        .dark-theme .nav-item {
            color: white;
        }
        
        .dark-theme .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        @media (max-width: 600px) {
            .nav-container {
                flex-direction: row;
                gap: 1.5em;
            }            
            .nav-item {
                padding: 3px 0px;
            }
        }
        
        @media (max-width: 768px) {
            .category-filters {
                display: none;
            }
            .category-toggle {
                display: inline-block;
                width: 100%;
                text-align: left;
            }
            .category-filters.expanded {
                display: block;
                margin-top: 10px;
            }
        }
        @media (max-width: 600px) {
            .sub-header-container {
                flex-direction: column;
                align-items: flex-start;
            }
            .update-info-container {
                text-align: left;
                width: 100%;
                margin-bottom: 0px;
            }
            .sort-container {
                margin-top: 0px;
                text-align: left;
                width: 100%;
            .sort-dropdown {
                float: right;
            }
            .sort-label {
                margin-top: 5px;
                float: left;
            }
        }
    </style>
    <script>
    function toggleAbstract(id) {
        var abstract = document.getElementById('abstract-' + id);
        var toggle = document.getElementById('toggle-' + id);
        if (abstract.classList.contains('expanded')) {
            abstract.classList.remove('expanded');
            toggle.textContent = '...';
        } else {
            abstract.classList.add('expanded');
            toggle.textContent = '';
        }
    }
    function getTimeDiffRu(dateString) {
        const timeUnits = {
            minute: ["минуту", "минуты", "минут"],
            hour: ["час", "часа", "часов"],
            day: ["день", "дня", "дней"]
        };

        function getRussianPlural(number, words) {
            if (number % 10 === 1 && number % 100 !== 11) {
                return words[0];
            } else if (number % 10 >= 2 && number % 10 <= 4 && (number % 100 < 10 || number % 100 >= 20)) {
                return words[1];
            } else {
                return words[2];
            }
        }

        const pastDate = new Date(dateString.replace(" ", "T") + ":00Z");
        const currentDate = new Date();
        const diffInSeconds = Math.floor((currentDate - pastDate) / 1000);

        const minutes = Math.floor(diffInSeconds / 60);
        const hours = Math.floor(diffInSeconds / 3600);
        const days = Math.floor(diffInSeconds / 86400);

        if (minutes == 0) {
            return 'только что';
        }
        else if (minutes < 60) {
            return `${minutes} ${getRussianPlural(minutes, timeUnits.minute)} назад`;
        } else if (hours < 24) {
            return `${hours} ${getRussianPlural(hours, timeUnits.hour)} назад`;
        } else {
            return `${days} ${getRussianPlural(days, timeUnits.day)} назад`;
        }
    }
    function isToday(dateString) {
        const inputDate = new Date(dateString);
        const today = new Date();
        return (
            inputDate.getFullYear() === today.getFullYear() &&
            inputDate.getMonth() === today.getMonth() &&
            inputDate.getDate() === today.getDate()
        );
    }
    function formatArticlesTitle(number) {
        const lastDigit = number % 10;
        const lastTwoDigits = number % 100;

        let word;

        if (lastTwoDigits >= 11 && lastTwoDigits <= 14) {
            word = "статей";
        } else if (lastDigit === 1) {
            word = "статья";
        } else if (lastDigit >= 2 && lastDigit <= 4) {
            word = "статьи";
        } else {
            word = "статей";
        }

        return `${number} ${word}`;
    }
    </script>
</head>
<body class="light-theme">
    <header>
        <div class="container">
            <a href="https://hfday.ru" class="a-clean"><h1 class="title-sign" id="doomgrad-icon">🔺</h1><h1 class="title-text" id="doomgrad">hf daily</h1></a>
            <p>24 октября | 4 статьи</p>
        </div>
        <div class="theme-switch">
            <label class="switch">
                <input type="checkbox" id="theme-toggle">
                <span class="slider"></span>
            </label>
        </div>
    </header>
    <div class="nav-menu">
        <div class="nav-container">
            <span class="nav-item" id="nav-prev"><a href="/d/2024-10-23.html">⬅️ 23.10</a></span>
            <span class="nav-item" id="nav-next"><a href="/d/2024-10-25.html">➡️ 25.10</a></span>
            <!--<span class="nav-item" id="nav-weekly">Топ за неделю</span>
            <span class="nav-item" id="nav-weekly">Топ за месяц</span>-->
        </div>
    </div>
    <div class="container">
        <div class="sub-header-container">
            <div class="update-info-container">
                <label class="update-info-label" id="timeDiff"></label>
            </div>
            <div class="sort-container">
                <label class="sort-label">🔀 Сортировка по</label>
                <select id="sort-dropdown" class="sort-dropdown">
                    <option value="default">рейтингу</option>
                    <option value="pub_date">дате публикации</option>
                    <option value="issue_id">добавлению на HF</option>
                </select>
            </div>
        </div>
        <div class="category-toggle">
            <div class="svg-container">
                <span id="category-toggle">🔍 Фильтр</span>
                <svg height="3" width="200">
                    <line x1="0" y1="0" x2="200" y2="0" 
                        stroke="black" 
                        stroke-width="2" 
                        stroke-dasharray="3, 3" />
                </svg>
            </div>
        </div>
        <div class="category-filters" id="category-filters">
            <span class="clear-categories" id="clear-categories">🧹</span>
            <!-- Categories -->
        </div>
        <main id="articles-container">
            <!-- Articles -->
        </main>
    </div>
    <footer>
        <div class="container">
            <p><a style="color:white;" href="https://t.me/doomgrad">градиент обреченный</a> ✖️ <a style="color:white;" href="https://huggingface.co/papers">hugging face</a></p>
        </div>
    </footer>
    <script>    
        function toggleTheme() {
            const body = document.body;
            body.classList.toggle('light-theme');
            body.classList.toggle('dark-theme');

            const isDarkMode = body.classList.contains('dark-theme');
            localStorage.setItem('darkMode', isDarkMode);
            
            if (isDarkMode) {
                const title = document.getElementById('doomgrad');
                title.innerHTML = "hf nightly";
                const titleSign = document.getElementById('doomgrad-icon');
                titleSign.classList.add('rotate');
            }  else {
                const title = document.getElementById('doomgrad');
                title.innerHTML = "hf daily";
                const titleSign = document.getElementById('doomgrad-icon');
                titleSign.classList.remove('rotate');
            }
        }

        const articlesData = [{'id': 'https://huggingface.co/papers/2410.17637', 'title': 'MIA-DPO: Multi-Image Augmented Direct Preference Optimization For Large Vision-Language Models', 'url': 'https://huggingface.co/papers/2410.17637', 'abstract': "Visual preference alignment involves training Large Vision-Language Models (LVLMs) to predict human preferences between visual inputs. This is typically achieved by using labeled datasets of chosen/rejected pairs and employing optimization algorithms like direct preference optimization (DPO). Existing visual alignment methods, primarily designed for single-image scenarios, struggle to effectively handle the complexity of multi-image tasks due to the scarcity of diverse training data and the high cost of annotating chosen/rejected pairs. We present Multi-Image Augmented Direct Preference Optimization (MIA-DPO), a visual preference alignment approach that effectively handles multi-image inputs. MIA-DPO mitigates the scarcity of diverse multi-image training data by extending single-image data with unrelated images arranged in grid collages or pic-in-pic formats, significantly reducing the costs associated with multi-image data annotations. Our observation reveals that attention values of LVLMs vary considerably across different images. We use attention values to identify and filter out rejected responses the model may have mistakenly focused on. Our attention-aware selection for constructing the chosen/rejected pairs without relying on (i) human annotation, (ii) extra data, and (iii) external models or APIs. MIA-DPO is compatible with various architectures and outperforms existing methods on five multi-image benchmarks, achieving an average performance boost of 3.0% on LLaVA-v1.5 and 4.3% on the recent InternLM-XC2.5. Moreover, MIA-DPO has a minimal effect on the model's ability to understand single images.", 'score': 10, 'issue_id': 243, 'pub_date': '2024-10-23', 'pub_date_ru': '23 октября', 'hash': '2dc1395b8aa096fc', 'data': {'desc': 'Статья представляет новый метод обучения больших визуально-языковых моделей (LVLM) под названием MIA-DPO. Этот подход эффективно работает с многоизображительными входными данными, решая проблему нехватки разнообразных обучающих данных. MIA-DPO расширяет однозображительные данные, добавляя несвязанные изображения в виде сеток или картинок-в-картинке. Метод использует значения внимания LVLM для идентификации и фильтрации ошибочно отвергнутых ответов, не требуя дополнительной аннотации или внешних моделей.', 'emoji': '🖼️', 'title': 'MIA-DPO: эффективное обучение LVLM на многоизображительных данных', 'categories': ['#rlhf', '#optimization', '#cv', '#benchmark', '#architecture'], 'embedding': [0.019406927128253464, -0.00032496327835267045, 0.05562897572685504, 0.015816329456466206, -0.02450203390461819, -0.03451525086763078, 0.08920864375292675, -0.025601970127620298, -0.03974943293500763, 0.027258198147789552, -0.03218894842041746, -0.04536290292448261, -0.017346125810203006, -0.043188312731967694, -0.021126365985968905, -0.037296700486585205, 0.08217916774124985, -0.004766391687361908, 0.021796443535306742, 0.04918107272506999, -0.04442732216445273, 0.026196190508844343, 0.03800470349768615, 0.06281017023781788, 0.05588183572927325, -0.09441753940375594, 0.001143396679022866, 0.018800065620284773, 0.08450546394387562, -0.06933392624465834, 0.016182975002902188, -0.027005338145371337, -0.11702313369788345, -0.028421349371396207, -0.019748285425530112, 0.10296417334841293, -0.001698896246181948, 0.10508818654477416, -0.07257052927994144, 0.019242567502222873, -0.02428710560855065, -0.029559215219219802, 0.034818681621615125, 0.018167917695768424, 0.02184701636840206, 0.06119187288323471, 0.15019823362989693, 0.026423764094714898, -0.07560483265672652, 0.06210216514518774, -0.08005515038183025, 0.06382160816596155, -0.05679213007275547, 0.010360896864426148, 0.01452674864795628, -0.032517665590949464, 0.03264409351062939, 0.0007593671375162076, 0.048624784050196615, 0.09062466018277458, 0.001004324302151604, -0.04311245764538309, 0.1229906072744381, 0.024249175983729162, -0.040103434440558104, -0.02826963503516863, -0.12309174877757036, -0.013780813930504652, 0.06463075268019478, -0.08298831433701226, 0.07337967379417466, 0.008698348280884569, 0.06741220438067838, 0.013287739215471238, 0.040558581612299215, -0.014375032646505352, 0.028219062202073313, 0.06948564890700266, 0.0151462533641988, -0.026550194095924008, 0.042227449718448516, 0.07004193758187605, 0.0021145332879908833, -0.034919825206276574, -0.017358769018476838, 0.02953392880267214, -0.04829606271660625, -0.031860231249885455, -0.09370953431112579, -0.01125222431396844, -0.08303888925163677, 0.02826963503516863, -0.04460432291722797, -0.023351526930049958, -0.0186862788273495, 0.06710877154516484, -0.005531290384612605, -0.08794435206695242, -0.0186862788273495, 0.09846328279021388, -0.12521577030004832, -0.0007443535878821835, 0.04614676518522654, -0.003988850406296138, 0.14180331193993834, -0.09290038979689258, 0.12541805538784204, 0.03350381502101629, 0.11075223144887365, 0.03969885802038313, -0.03823227708355671, -0.012984308461486894, -0.044174462162034515, 0.061040158547007124, 0.08238145491057275, -0.1486810819415044, -0.06154587438878518, -0.019988502219674496, 0.004504050319502915, -0.09891842996195499, -0.06989022324564846, -0.009279924204917278, 0.07363253379659288, -0.027586914277556964, 0.06286074098938402, -0.07671741208800245, 0.024729607490488748, -0.10281246317524373, 0.045868618766260666, -0.060079293451958775, -0.06119187288323471, 0.056943840245924686, 0.10994308277158206, -0.06377103325133705, -0.1463547732497035, 0.007086372530438308, -0.014994536946442035, 0.09492326149012155, -0.10822363558774989, 0.019444856753074953, 0.030267220311849943, -0.08582034095212036, 0.019748285425530112, 0.04121601387183404, -0.05059708291033027, -0.022618235420872157, -0.020810294105239914, 0.035349683879940835, 0.0014009967397027139, 0.05042007799449666, -0.0578541345894069, -0.0749474003971917, -0.022871093341761187, -0.01462789181631189, -0.13199238839083619, -0.06422618042307815, -0.04801792046069874, -0.038105849163876784, 0.0060117220995251075, -0.09335553488710452, 0.05714612741524758, -0.03304866784927518, 0.05871385401826462, 0.005161483827955249, 0.031278656158464424, 0.10215503091570889, -0.07272223945311064, 0.09143380261547861, -0.0896132243361601, -0.04098844236749267, -0.06427675325617348, -0.00020762092133887089, -0.05087522516623777, -0.09553011675350269, 0.05921957402310105, -0.030191361062206965, -0.011372332711040633, -0.026676622015603925, 0.0058094351383551285, -0.07287395378933822, -0.01678983713532963, 0.0748968254825672, -0.027662773527199938, 0.06281017023781788, -0.04141830104115694, -0.0674627772137737, -0.05805641967720061, -0.042227449718448516, -0.06114130213166857, 0.04983850498460481, -0.019735642217256284, 0.04273316764175576, 0.09446811431838044, 0.022555021461032197, -0.043061884812287766, -0.05062236932687793, 0.0500407942354569, 0.09487268657549705, -0.0272329106904773, -0.012105623387606757, 0.07631283566782747, 0.042682596890189634, 0.060888442129250354, -0.17164068190424073, 0.025601970127620298, -0.04399746349078846, -0.05729784383300434, -0.01909085316599529, 0.019432213544801125, -0.030115503894093173, 0.0532521004465464, 0.0018853798214683957, 0.12663177424072106, 0.05034422290791205, 0.008281131566576621, -0.13543126194320873, -0.06149530363721905, -0.06549047210905248, 0.0453881851779719, 0.07297510361858722, -0.008856385262013657, -0.05320152969498027, 0.06958679041013492, 0.043567602735595005, -0.12835122142455324, -0.01462789181631189, 0.01909085316599529, -0.12986837519447497, 0.029559215219219802, -0.15909887324316277, 0.0297615023885427, -0.0374989876559081, -0.030064933142527044, 0.035804831051681946, 0.03105108257259387, -0.08713520547119001, 0.05765184742008401, -0.10620077430216684, 0.02304809617606561, -0.03656340689587822, 0.017042695056218662, 0.040052861607462784, 0.06124244571633002, -0.08779263564919565, -0.10326761034698483, 0.09330496205400919, -0.0748968254825672, 0.05254409327238708, -0.01855984882614039, 0.002131917178985102, 0.0030959420353373203, -0.03335209860325953, -0.15292910417116848, -0.12895808085099275, -0.014589963440407914, 0.03322566860205042]}}, {'id': 'https://huggingface.co/papers/2410.17891', 'title': 'Scaling Diffusion Language Models via Adaptation from Autoregressive Models', 'url': 'https://huggingface.co/papers/2410.17891', 'abstract': 'Diffusion Language Models (DLMs) have emerged as a promising new paradigm for text generative modeling, potentially addressing limitations of autoregressive (AR) models. However, current DLMs have been studied at a smaller scale compared to their AR counterparts and lack fair comparison on language modeling benchmarks. Additionally, training diffusion models from scratch at scale remains challenging. Given the prevalence of open-source AR language models, we propose adapting these models to build text diffusion models. We demonstrate connections between AR and diffusion modeling objectives and introduce a simple continual pre-training approach for training diffusion models. Through systematic evaluation on language modeling, reasoning, and commonsense benchmarks, we show that we can convert AR models ranging from 127M to 7B parameters (GPT2 and LLaMA) into diffusion models DiffuGPT and DiffuLLaMA, using less than 200B tokens for training. Our experimental results reveal that these models outperform earlier DLMs and are competitive with their AR counterparts. We release a suite of DLMs (with 127M, 355M, and 7B parameters) capable of generating fluent text, performing in-context learning, filling in the middle without prompt re-ordering, and following instructions https://github.com/HKUNLP/DiffuLLaMA.', 'score': 4, 'issue_id': 243, 'pub_date': '2024-10-23', 'pub_date_ru': '23 октября', 'hash': 'a6f6dc7932b17a7f', 'data': {'desc': 'Исследователи предлагают новый подход к созданию диффузионных языковых моделей (DLM), адаптируя существующие авторегрессионные модели. Они демонстрируют связь между целевыми функциями авторегрессионных и диффузионных моделей и вводят метод дообучения для создания DLM. Эксперименты показывают, что полученные модели DiffuGPT и DiffuLLaMA превосходят предыдущие DLM и конкурентоспособны с авторегрессионными аналогами. Авторы представляют набор DLM различных размеров, способных генерировать связный текст и выполнять различные языковые задачи.', 'emoji': '🔄', 'title': 'Преобразование авторегрессионных моделей в диффузионные: новый шаг в языковом моделировании', 'categories': ['#diffusion', '#training', '#benchmark', '#multimodal'], 'embedding': [0.004957958828755283, 0.041299545636998586, 0.10368928361453277, -0.02056168683894174, -0.055569405845362206, -0.029647082866578724, -0.07031744293530909, -0.03410169593841481, -0.09105529965821564, 0.09045128151267814, -0.07036777985592084, -0.04442028945440663, -0.05959617273077591, 0.01965566377093609, 0.03155979869351295, -0.02614882770820975, 0.08768288161350031, -0.009242692419704037, 0.04890006994897344, 0.08722987630494837, 0.058388140590001504, 0.025016297835627536, -0.05129096265749093, -0.027885371576028873, 0.016987929412380583, -0.04152605036642486, -0.030100093363006404, 0.08758221607287797, -0.09170964849891401, -0.09488073338723438, 0.03140879415712857, -0.027457527464756777, -0.058237142279068, -0.013653261256671172, 0.024714290838009082, 0.09306868517607278, 0.048749065412589075, 0.10610534997123185, -0.02434936528356381, 0.0335731821362198, 0.022436651531779872, -0.11486356950336937, 0.007235599795104725, 0.03161013146382411, -0.049655088480594724, 0.07389120451217084, 0.07056911716261638, 0.08712920038857458, -0.013942685788014436, 0.025708399885572285, -0.065082643909121, 0.06256591616210015, -0.03140879415712857, -0.0765086019501146, -0.0009484927203367068, -0.02660183924221258, -0.01613224077480633, -0.05204598118911221, -0.015175883276369274, -0.08214606936424289, 0.04952925136694108, -0.028262880841839515, 0.002156523159487868, -0.02592232090363319, -0.03508321712431207, -0.05330434610019778, -0.14103756048400928, 0.05954583996046474, -0.008972143662923848, 0.08410912626208945, -0.020461017148018828, -0.13469541145887143, 0.02632499966732485, -0.08592117239810075, -0.09236400564021355, -0.05063661174164227, -0.03249098710909904, 0.0426837455865875, -0.03646742122420157, 0.08481381202339956, 0.058136470512994795, 0.028514555069146803, -0.08496480825918278, -0.09090430342243243, -0.05456271101128334, -0.05994851457385582, 0.03513355612007411, 0.013967852588200077, -0.041349878407309755, -0.17395640415528216, 0.05516672915682083, -0.05446204547066102, -0.04857289345347397, 0.025330890619761647, 0.12331979033848958, -0.053757359709350895, 0.02728135550564167, -0.004372818947961217, 0.08169306405569093, 0.028866896912226714, -0.025695816174206923, 0.031131954582240853, 0.07278384206231936, -0.0578847983608378, 0.04728936319480797, 0.00032914112328609127, -0.019403990581203946, -0.033900358631719266, -0.07892466830681369, 0.0694617547127649, -0.110434123854264, 0.018611219877911426, 0.033673853902293, -0.025846818635441006, 0.030477603666392194, -0.09629010698500491, -0.11204483060842949, -0.019554994080013172, 0.04698735412203922, 0.018988729143722065, -0.036215751147194865, 0.03790195809440224, 0.07333751913694452, -0.04728936319480797, 0.022008807420507776, -0.055770743152057746, 0.03347251037014659, -0.11305152336735806, -0.0166607549920314, 0.02136704021602448, -0.0022729218670724015, 0.01203626285433804, 0.0006299690205091301, 0.025418976599319198, -0.0808877106786082, -0.07011610355346326, -0.09120630834490061, 0.032415485878481996, -0.029571581635961686, -0.018422466282581252, 0.026425669358247767, -0.033673853902293, -0.10771605049994647, 0.08702853277280195, -0.03598924226746801, -0.020712689300175825, -0.03832980013052405, 0.030049759555120095, -0.03256648937729123, 0.10912542409771697, -0.0578847983608378, -0.05909282635131162, 0.037096602642169206, -0.014748039787642263, -0.0008084996369481269, -0.07384086136610821, -0.04947891652147962, 0.15241318990499225, 0.1028839343877506, -0.09749813082517815, 0.0034982551583689738, 0.12019903822048038, -0.038380139126286086, -0.05707944290860477, -0.007015385883785993, 0.013414171985819423, -0.015050046577745689, 0.0023122459650891654, -0.13399073192301217, -0.061156546714630215, -0.03075444531643021, -0.01718926671907612, -0.052297657491569796, -0.10600468235545922, -0.05209631810972396, -0.00654349878273512, -0.08118971975137694, -0.105098655137153, -0.0008973716419329489, -0.1334873834683976, -0.07268316822109586, 0.11204483060842949, -0.057985465976610424, -0.07731395325204704, -0.056727098990374564, -0.027583364578410416, -0.03541039361981154, 0.027784701885105956, 0.028816562066765253, 0.014194357940171433, -0.01081564866231851, 0.09276667817845433, 0.1530172039002292, 0.03790195809440224, 0.06729736465852339, -0.00015562438122298917, 0.1576479847808798, 0.07374019582548588, 0.005983526117156753, -0.015289136678657554, 0.10263225808529304, 0.04094720171876839, -0.1290579253683905, -0.15946002676659052, -0.03883314858513862, -0.010482181763741556, 0.026878679854675448, -0.022902246777148062, -0.07162614061670583, -0.06322026292764822, 0.06125721225525255, 0.03800262571017486, 0.08692786515702933, 0.023732767576961532, -0.09452838739385389, 0.04109820625515275, -0.037398611714937954, -0.0222856469953955, 0.049655088480594724, 0.026274664821863393, -0.058388140590001504, 0.004224960961963273, 0.028011206614532224, 0.03619057957416356, -0.07967968268813438, -0.04932791198509525, 0.09035061182175523, -0.033271175138601346, 0.07082079138992366, 0.010991819998888524, 0.07535090672995194, -0.06664302204327589, -0.06966309409461073, -0.13378938009026461, 0.08778355130442322, -0.12029970583625299, 0.04872389798985834, -0.005118400318603562, -0.004136875189920751, -0.02798604126695179, -0.03913515558275708, 0.007059428458534711, 0.08043470121975566, -0.03966367146010238, 0.015414973792311198, 0.05828747297422888, -0.04937824683055671, -0.06120687948494138, 0.06639134574081831, 0.010004002807008, 0.0016390205197676065, -0.00039933430622196797, -0.038984153121522994, -0.025091800103819725, -0.005193901964250661, 0.004077103183480358]}}, {'id': 'https://huggingface.co/papers/2410.18072', 'title': 'WorldSimBench: Towards Video Generation Models as World Simulators', 'url': 'https://huggingface.co/papers/2410.18072', 'abstract': 'Recent advancements in predictive models have demonstrated exceptional capabilities in predicting the future state of objects and scenes. However, the lack of categorization based on inherent characteristics continues to hinder the progress of predictive model development. Additionally, existing benchmarks are unable to effectively evaluate higher-capability, highly embodied predictive models from an embodied perspective. In this work, we classify the functionalities of predictive models into a hierarchy and take the first step in evaluating World Simulators by proposing a dual evaluation framework called WorldSimBench. WorldSimBench includes Explicit Perceptual Evaluation and Implicit Manipulative Evaluation, encompassing human preference assessments from the visual perspective and action-level evaluations in embodied tasks, covering three representative embodied scenarios: Open-Ended Embodied Environment, Autonomous, Driving, and Robot Manipulation. In the Explicit Perceptual Evaluation, we introduce the HF-Embodied Dataset, a video assessment dataset based on fine-grained human feedback, which we use to train a Human Preference Evaluator that aligns with human perception and explicitly assesses the visual fidelity of World Simulators. In the Implicit Manipulative Evaluation, we assess the video-action consistency of World Simulators by evaluating whether the generated situation-aware video can be accurately translated into the correct control signals in dynamic environments. Our comprehensive evaluation offers key insights that can drive further innovation in video generation models, positioning World Simulators as a pivotal advancement toward embodied artificial intelligence.', 'score': 4, 'issue_id': 243, 'pub_date': '2024-10-23', 'pub_date_ru': '23 октября', 'hash': 'e4c42676df8ded0d', 'data': {'desc': 'Статья представляет новый подход к оценке предиктивных моделей, называемый WorldSimBench. Эта система включает в себя явную перцептивную оценку и неявную манипулятивную оценку, охватывающие три сценария: открытую среду, автономное вождение и робототехнику. Авторы вводят датасет HF-Embodied для оценки визуальной точности симуляторов мира на основе человеческих предпочтений. Также предлагается оценка соответствия видео и действий, проверяя, могут ли сгенерированные видео точно преобразовываться в сигналы управления в динамических средах.', 'emoji': '🌐', 'title': 'WorldSimBench: Комплексная оценка симуляторов мира для воплощенного ИИ', 'categories': ['#benchmark', '#video', '#rlhf', '#agents'], 'embedding': [0.06881044100443194, 0.051858759640815356, 0.06641266637746733, 0.010866640183924619, -0.0031435888596035243, -0.015683091311885364, 0.03200744695325655, 0.01055994835123045, 0.10845729470250465, -0.012316455199092607, 0.02880112746183785, -0.1116357283554009, -0.019237925572553823, -0.17754654234791142, -0.007486062661077917, 0.038810427307116986, 0.034572506427210235, 0.016756511971711314, 0.012867105861054324, -0.007395448993553813, 0.09289966379184549, -0.0394516916366028, 0.006830857568341274, -0.040371764763073865, 0.009967476046319387, -0.04118031609555916, -0.031338303253279486, 0.0794052378141728, -0.022026032946499866, 0.014526028659766963, 0.09462828825080184, -0.02498142301142457, -0.1186617566092537, -0.07979557271716463, -0.026222129380643742, 0.08464687208803476, -0.07711898713720437, 0.1141450290883721, -0.03518588707418401, 0.09066918479192193, 0.06875467579541825, -0.005983970861724546, -0.03936804274507707, 0.054340172379253704, -0.12011157011521441, 0.033624549618227126, 0.010016268070894145, -0.03317845166223202, -0.005882902052964405, 0.14230490084476574, -0.12356882550115832, 0.08152419502011057, 0.04670076347842714, -0.06312270230654368, 0.07661712828421637, -0.030390346444296376, -0.008664037104875672, -0.033429381088726014, -0.04675652437542003, 0.06312270230654368, -0.01812268391658165, -0.0032446574527626253, -0.05052046577283002, 0.02376859816870704, -0.09959112235172014, -0.07014872624837568, -0.09758368262774735, 0.08475840035005172, -0.006081554264070942, 0.0055378741993356755, 0.046561355845918924, 0.04873608041688078, 0.07087363300135603, 0.05408924079674931, -0.06579928357448314, -0.015362459578344536, 0.09317847905686194, 0.10639409623754938, -0.043856895207488214, -0.01569703272193931, -0.0386989012011104, 0.010441453588406781, -0.07589222368724642, 0.05882902052964405, -0.0829182519410992, 0.01983736761228718, -0.03722120616864805, -0.10109669675467374, -0.12011157011521441, -0.048289980304875274, 0.016059486314030525, 0.022750939699480218, -0.05141265952880984, 0.12334577760116595, 0.055176600926219836, -0.03563198503017912, -0.12769521811904808, -0.14219337042673835, 0.10511156542256733, 0.07338293157831681, -0.07533460393726553, 0.03638477330966112, 0.02180298289049711, 0.07031601109536473, 0.040539051766073336, 0.011040896274943255, 0.000842094887260792, 0.031840162106267486, -0.13784392128481462, 0.010845729470250465, -0.13483277247890746, -0.039786261330580934, -0.16483277324016, 0.019879189902039643, 0.038559493568602186, -0.07070634599835655, -0.08085505132013351, -0.0769517022902153, 0.039144999157105516, 0.011215153443967093, 0.04731414412540092, 0.052583666393795706, 0.10171007093361631, -0.09144984812987439, 0.051189611628817494, -0.07622679553723494, 0.008552513154879496, -0.06278813261256555, 0.01437268220441728, -0.07650561080225139, -0.07973980750815093, 0.006545076880523339, 0.01622677245462583, -0.07215616166032766, -0.09250933535688487, -0.024200753205440923, -0.11587364923530766, -0.005109202844207213, -0.031198897776781667, -0.010037179215770377, -0.08631973564999822, 0.014609671514463577, -0.04421935073998879, 0.08118962317012206, -0.07265802482533647, 0.02296004683622175, 0.08726769030297092, 0.06234203250056004, -0.06446099186250821, 0.11899632845924224, -0.04628254489292328, -0.007200281757658942, -0.05414500384975259, -0.04357808641050297, -0.041263958519053685, -0.0754461235752409, -0.016198891574927307, 0.06975838918937344, -0.007430300470478788, -0.04304834387500293, 0.007409389756804634, -0.015975842381328712, -0.015404281005692843, 0.07059482636038118, 0.07371750342830535, 0.03883830452159783, -0.11442383572934696, 0.08197029513211608, -0.0744424101812857, -0.053949837476261885, 0.0354925817096917, 0.020952611424269754, -0.03256506885924784, -0.009179836074311373, 0.018429376396078938, -0.024828078927686324, 0.022946104994965726, -0.056682179641194236, -0.0352416501271873, -0.10098516849265676, -0.008127326559361658, 0.06964686955139808, -0.08247215182909368, 0.01201673374802385, 0.028661721985340026, -0.02206785308024193, -0.027978635366101737, 0.08604092900902337, -0.026250010907145387, -0.04368960604847835, -0.06200746065057151, 0.09741639778075827, 0.08174724723212373, 0.11721194310329298, 0.039842022227573826, -0.006632204926032658, -0.013278351262119258, 0.10282531690160929, 0.05804835072366041, -0.06791824078042093, 0.07171007017236375, -0.05486991060273295, 0.05093868435833389, -0.11921937635923457, 0.05099444525532677, 0.0794052378141728, 0.0070852724012490185, 0.05450745722624277, -0.0998141680957021, 0.032397784012258776, 0.08230486482609423, 0.0016894175607406424, 0.10288108211062298, -0.005485596768347173, -0.08425653718504292, -0.003816218828398495, -0.039144999157105516, -0.0012738155741393578, -0.051161730102315846, 0.044024182210487685, -0.018610602006318824, 0.026375475620392386, 0.1082900098555156, -0.03789035202463552, -0.01926580709905547, -0.07076211120737025, 0.022276960216983464, -0.07215616166032766, 0.006189593670057533, -0.05983273823562005, -0.020827146711022756, 0.032397784012258776, -0.08174724723212373, 0.032258378535760954, -0.04770448118440314, -0.026807630657126272, 0.01862454276956965, 0.0009514409217906146, 0.03250930580624455, -0.03752789864814534, 0.02238848632299004, 0.015752794265735316, 0.04148700426303564, -0.04681228527241292, 0.010002327954446442, 0.08553906584401456, -0.023754657405456216, -0.07750932419620658, 0.027002799186627385, -0.021398707224254465, 0.11046473011445665, -0.07488850382526002, -0.026473058807137743, 0.019251866335804647, -0.0034276268442145863, -0.029860606064806734]}}, {'id': 'https://huggingface.co/papers/2410.17883', 'title': 'Lightweight Neural App Control', 'url': 'https://huggingface.co/papers/2410.17883', 'abstract': 'This paper introduces a novel mobile phone control architecture, termed ``app agents", for efficient interactions and controls across various Android apps. The proposed Lightweight Multi-modal App Control (LiMAC) takes as input a textual goal and a sequence of past mobile observations, such as screenshots and corresponding UI trees, to generate precise actions. To address the computational constraints inherent to smartphones, within LiMAC, we introduce a small Action Transformer (AcT) integrated with a fine-tuned vision-language model (VLM) for real-time decision-making and task execution. We evaluate LiMAC on two open-source mobile control datasets, demonstrating the superior performance of our small-form-factor approach against fine-tuned versions of open-source VLMs, such as Florence2 and Qwen2-VL. It also significantly outperforms prompt engineering baselines utilising closed-source foundation models like GPT-4o. More specifically, LiMAC increases the overall action accuracy by up to 19% compared to fine-tuned VLMs, and up to 42% compared to prompt-engineering baselines.', 'score': 1, 'issue_id': 243, 'pub_date': '2024-10-23', 'pub_date_ru': '23 октября', 'hash': '66e9ccd38bb979e0', 'data': {'desc': "Статья представляет новую архитектуру управления мобильными приложениями под названием 'app agents'. Предложенная система LiMAC использует текстовую цель и последовательность предыдущих наблюдений для генерации точных действий. Авторы вводят компактный Action Transformer (AcT) в сочетании с настроенной мультимодальной моделью для принятия решений в реальном времени. Эксперименты показывают, что LiMAC превосходит базовые модели на основе промптов и настроенные мультимодальные модели, повышая точность действий до 42%.", 'emoji': '📱', 'title': 'Эффективное управление Android-приложениями с помощью легковесных агентов', 'categories': ['#agents', '#cv', '#multimodal', '#architecture'], 'embedding': [0.008865341087960986, 0.09468604357218173, 0.05227403965179727, 0.005268714105163022, -0.017874941402068783, -0.011763625379604773, 0.00514084855051685, -0.018661804957292815, -0.0164716984704767, -0.00457037181742621, -0.03999895286044254, -0.10984629269851756, -0.052405180552037696, -0.0009548929999207165, -0.01673398632221804, -0.07375544557084171, 0.002070437566211576, -0.06672611984848749, 0.05675916534562184, 0.054555945777325095, 0.08067985050465629, -0.029297593179535862, 0.031736870402439034, 0.032707337269260145, -0.03113361015881209, -0.07008340354394194, -0.09909248069168837, -0.008622724472110049, -0.06410324133107406, -0.06966374862899892, 0.04993967514908644, 0.002370429611810554, -0.029874625243114718, -0.08692230662052597, -0.020196190806212155, 0.02879924565610126, 0.047893826678165045, -0.03451712606848829, -0.06866705358212973, -0.021769921950833868, -0.055080521480807776, -0.02633373420188952, 0.053769080205014246, 0.11635104473447594, -0.07564391487604046, 0.011311178280652078, -0.020196190806212155, 0.11257410007281796, -0.0990400243315922, 0.054555945777325095, -0.10182028403181512, 0.025520642466617408, -0.07826679541054071, -0.029927083620297716, -0.010058752729616583, -0.10108587078542677, -0.033520431021619085, -0.0005364613876273701, 0.026241934563177808, 0.022124009441286924, -0.1359701994429356, -0.021363373057567567, 0.007560457361451174, 0.09374180488540869, -0.12967528494988284, -0.04537586088094396, -0.13817341295997182, 0.04073335803848357, -0.0195142419882673, -0.06279179400402003, 0.012484918282999902, -0.012681634676077618, -0.08277815735276067, -0.09059434864742576, -0.03370403433321617, -0.027199286331431462, -0.0014663549562841198, 0.08749934070119167, 0.020078160970365525, 0.07532917671546342, 0.11026595769889473, -0.014255363198486453, 0.029350049539632033, -0.0889156987313512, -0.09227298847806616, -0.009901379010028362, -0.08225357761510432, -0.06751298138662469, -0.16324818241703226, -0.0721817083749595, 0.008839112504495535, 0.08482400178950841, -0.04388081629355334, 0.015002884887055718, 0.03045166134086723, 0.1361800269004071, -0.05938204789720892, 0.04776267972666413, 0.10486281746417156, 0.1426847890217996, 0.04193988255991111, -0.025966532621412422, 0.01102921899131165, -0.07443739237169975, 0.06499501558940361, -0.019356868873805128, 0.041100560627504085, 0.03944814695982494, -0.02364528019163881, 0.08996485013831658, -0.0747521325493636, -0.11561664157352174, -0.0662015441450048, 0.05004458988636561, 0.04629386533640842, -0.006435896759935802, -0.0064457324787353465, -0.08172900191162165, -0.06767035853526052, -0.10795782541040566, -0.023881339863332064, 0.051041282916147984, 0.03700886368566129, 0.0021966636326824756, 0.07737502115221116, -0.041834967822631935, 0.07291611960426103, -0.04448407653718028, 0.05460840213742127, -0.024576405796931208, -0.02104862783718664, 0.04159890815093868, 0.08608299275646628, -0.04485128316037445, -0.05633950639650515, -0.004540864257610211, -0.05597229977331098, 0.05612967490485998, -0.10171536122618863, 0.08692230662052597, 0.027855006969328234, 0.00514084855051685, 0.0061342650244528675, 0.0195142419882673, -0.0391858591080836, -0.03454335424853636, -0.016314325356014528, 0.03089755048711883, -0.07889629391964988, 0.09888265323421686, -0.0004229397206745099, -0.08797146004457819, -0.07742747952939416, 0.020642081969550582, -0.0008061263713731317, -0.058542723947715064, -0.014412736918074674, 0.0952106192756644, -0.058700099079264066, -0.10328908631954985, -0.028327126312714748, -0.03632691486771643, 0.01735036368149927, -0.013573414985667645, -0.0823584923523835, 0.08503383731532724, 0.021284687508879897, 0.09138120816847613, -0.08797146004457819, -0.033520431021619085, -0.10722341418110413, -0.06746052099235486, -0.020786339985445296, -0.1084823990968015, -0.06515238870386578, -0.10103341845950425, 0.015356974394595603, -0.0038917011689971696, -0.12841630003418547, -0.0018474925896684105, -0.03992026226903779, 0.10701358874071945, -0.02869432890173526, -0.03866128138751408, -0.09059434864742576, -0.06824739059883937, 0.0584902675876189, 0.12306562221081897, -0.02427477264948749, 0.0013704558508120953, -0.012235744722991286, 0.14866495728592796, 0.014832397884278188, 0.052483869126355616, 0.0008860423026852531, 0.06688349296294967, 0.10491528189261505, -0.03651051616222668, -0.0007811270409635064, -0.0678277316497227, 0.04524471392944305, -0.004947411133789683, 0.05786077714685704, -0.06614908778490863, -0.0898074830751149, -0.05513297985799078, -0.03074017737265666, 0.014425850806390033, 0.030215601669173975, 0.02879924565610126, 0.10575459979084842, -0.08713214012925799, 0.01820280172101717, -0.004822824353785374, -0.08335518538216587, -0.02049782395365587, 0.0305565760781464, -0.026805853545276034, -0.051880602831468184, 0.006039185602555875, 0.07254891499815368, 0.01614383916007173, 0.12348528519410933, -0.07454230509189208, -0.1145674861323827, 0.005757226313215444, 0.04193988255991111, -0.05195929342287293, 0.04154645179084251, -0.04810365816981022, 0.038320304961454825, 0.004596600602600345, -0.0682998509931092, -0.07590620474486863, 0.07564391487604046, -0.09872527406849421, 0.03108115178162909, -0.08739442596391249, 0.0011147248827158276, -0.0024015764580931427, -0.019251954136525955, 0.05502806512071161, -0.0056785395542756755, -0.11656087219194745, -0.02037979411780924, 0.05597229977331098, -0.072286631180586, -0.09153857926585146, 0.050674082344214305, -0.03582856532719499, 0.04508734283206771, 0.0013352108287047657, -0.03307454389245432, -0.0294811934655027, -0.01614383916007173, 0.08020773116126977]}}];
        const articlesContainer = document.getElementById('articles-container');
        const sortDropdown = document.getElementById('sort-dropdown');
        const categoryFiltersContainer = document.getElementById('category-filters');
        const categoryToggle = document.getElementById('category-toggle');
        const clearCategoriesButton = document.getElementById('clear-categories');
        let selectedCategories = [];
        let selectedArticles = [];
        let sortBy = 'issue_id';     

        function getUrlParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const categoriesParam = urlParams.get('cat');
            let categories = categoriesParam ? categoriesParam.split(',') : [];
            categories = categories.map(element => `#${element}`);
            return categories
        }

        function updateUrlWithCategories() {
            let cleanedCategories = selectedCategories.map(element => element.replace(/^#/, ''));
            const newUrl = cleanedCategories.length > 0 
                ? `${window.location.pathname}?cat=${cleanedCategories.join(',')}`
                : window.location.pathname;
            console.log("cleanedCategories", cleanedCategories)
            window.history.pushState({}, '', newUrl);
        }

        function loadSettings() {
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            const themeToggle = document.getElementById('theme-toggle');
            let settingSortBy = localStorage.getItem('sort_by');
            const sortDropdown = document.getElementById('sort-dropdown');
            
            if (isDarkMode) {
                document.body.classList.remove('light-theme');
                document.body.classList.add('dark-theme');
                themeToggle.checked = true;
                const title = document.getElementById('doomgrad');
                title.innerHTML = "hf nightly";
                const titleSign = document.getElementById('doomgrad-icon');
                titleSign.classList.add('rotate');
            }

            if ((!settingSortBy) || (settingSortBy === 'null')) {
                settingSortBy = 'issue_id';
            }
            
            sortDropdown.value = settingSortBy;
            sortBy = settingSortBy;
        }

        document.getElementById('theme-toggle').addEventListener('change', toggleTheme);

        function getUniqueCategories(articles) {
            const categories = new Set();
            articles.forEach(article => {
                if (article.data && article.data.categories) {
                    article.data.categories.forEach(cat => categories.add(cat));
                }
            });
            let res = Array.from(categories);
            res.sort();
            return res;
        }
        
        function createCategoryButtons() {
            const categories = getUniqueCategories(articlesData);
            categories.forEach(category => {
                const button = document.createElement('span');
                button.textContent = category;
                button.className = 'category-button';
                button.onclick = () => toggleCategory(category, button);
                categoryFiltersContainer.appendChild(button);
            });
        }

        function toggleCategory(category, button) {
            const index = selectedCategories.indexOf(category);
            if (index === -1) {
                selectedCategories.push(category);
                button.classList.add('active');
            } else {
                selectedCategories.splice(index, 1);
                button.classList.remove('active');
            }         
            filterAndRenderArticles();
            saveCategorySelection();
            updateSelectedArticlesTitle();
            updateUrlWithCategories();
        }

        function saveCategorySelection() {
            localStorage.setItem('selectedCategories', JSON.stringify(selectedCategories));
        }

        function updateSelectedArticlesTitle() {
            if (selectedArticles.length === articlesData.length) {
                categoryToggle.textContent = '🏷️ Фильтр';
            } else {
                categoryToggle.textContent = `🏷️ Фильтр (${formatArticlesTitle(selectedArticles.length)})`;
            }
        }

        function cleanCategorySelection() {
            localStorage.setItem('selectedCategories', JSON.stringify('[]'));
        }

        function loadCategorySelection() {
            const urlCategories = getUrlParameters();
            if (urlCategories.length > 0) {
                selectedCategories = urlCategories;
                saveCategorySelection();
            } else {
                const savedCategories = localStorage.getItem('selectedCategories');
                if (savedCategories && savedCategories !== '"[]"') {
                    selectedCategories = JSON.parse(savedCategories);                    
                }
            }
            updateCategoryButtonStates();
        }

        function updateCategoryButtonStates() {
            const buttons = categoryFiltersContainer.getElementsByClassName('category-button');
            Array.from(buttons).forEach(button => {
                if (selectedCategories.includes(button.textContent)) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
        }

        function filterAndRenderArticles() {
            console.log(selectedCategories);
            let filteredArticles = selectedCategories.length === 0
                ? articlesData
                : articlesData.filter(article => 
                    article.data && article.data.categories && 
                    article.data.categories.some(cat => selectedCategories.includes(cat))
                );

            console.log('filteredArticles', filteredArticles)

            if (filteredArticles.length === 0) {
                selectedArticles = articlesData;
                selectedCategories = [];
                cleanCategorySelection();
            } else {
                selectedArticles = filteredArticles;
            }

            console.log('selectedArticles', selectedArticles)

            sortArticles(selectedArticles);
        }

        function clearAllCategories() {
            selectedCategories = [];
            updateCategoryButtonStates();
            filterAndRenderArticles();
            saveCategorySelection();
            updateSelectedArticlesTitle();
            updateUrlWithCategories();
        }

        function renderArticles(articles) {
            console.log(articles);
            articlesContainer.innerHTML = '';
            articles.forEach((item, index) => {
                if ("error" in item) {
                    console.log(`Omitting JSON. ${item["raw_data"]}`);
                    return;
                }
                const explanation = item["data"]["desc"];
                const cats = item["data"]["categories"].join(" ");
                const articleHTML = `
                    <article class='x${item["hash"]}'>
                        <div class="background-digit">${index + 1}</div>
                        <div class="article-content" onclick="toggleAbstract(${index})">
                            <h2>${item['data']['emoji']} ${item['title']}</h2>
                            <p class="meta"><svg class="text-sm peer-checked:text-gray-500 group-hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12"><path transform="translate(0, 2)" fill="currentColor" d="M5.19 2.67a.94.94 0 0 1 1.62 0l3.31 5.72a.94.94 0 0 1-.82 1.4H2.7a.94.94 0 0 1-.82-1.4l3.31-5.7v-.02Z"></path></svg> ${item['score']}. ${item['data']['title']}</p>
                            <p class="pub-date">📅 Статья от ${item['pub_date_ru']}</p>
                            <div id="abstract-${index}" class="abstract">
                                <p>${explanation}</p>
                                <div id="toggle-${index}" class="abstract-toggle">...</div>
                            </div>
                            <div class="links">
                                <a href="${item['url']}" target="_blank">Статья</a>
                            </div>
                            <p class="tags">${cats}</p>
                        </div>
                    </article>
                `;
                articlesContainer.innerHTML += articleHTML;
            });
        }
        
        function sortArticles() {
            let sortedArticles = [...selectedArticles];
            if (sortBy === 'issue_id') {
                sortedArticles.sort((a, b) => b.issue_id - a.issue_id);
            }
            if (sortBy === 'pub_date') {
                sortedArticles.sort((a, b) => b.pub_date.localeCompare(a.pub_date));
            }
            renderArticles(sortedArticles);
            localStorage.setItem('sort_by', sortBy);
        }
        
        sortDropdown.addEventListener('change', (event) => {
            sortBy = event.target.value;
            sortArticles(event.target.value);
        });

        categoryToggle.addEventListener('click', () => {
            categoryFiltersContainer.classList.toggle('expanded');
        });

        clearCategoriesButton.addEventListener('click', clearAllCategories);
        
        function updateTimeDiffs() {
            const timeDiff = document.getElementById('timeDiff');
            timeDiff.innerHTML = '🔄 ' + getTimeDiffRu('2024-10-24 06:18');
        } 
        function hideNextLink() {
            if (isToday('2024-10-24 06:18')) {
                const element = document.getElementById('nav-next');
                if (element) {    
                    element.style.display = 'none';
                }
            }
        }

        loadSettings();
        createCategoryButtons();
        loadCategorySelection();
        filterAndRenderArticles();
        updateSelectedArticlesTitle();
        updateTimeDiffs();
        hideNextLink(); 
    </script>
</body>
</html>
    